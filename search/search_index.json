{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SpatialVista - Interactive 3D Spatial Transcriptomics Visualization","text":""},{"location":"#overview","title":"Overview","text":"<p>SpatialVista is an interactive 3D spatial transcriptomics visualization tool designed specifically for Jupyter Notebook/Lab. It seamlessly integrates into your data analysis workflow, providing efficient and intuitive exploration of spatial omics data.</p> <p></p>"},{"location":"#key-features","title":"\u2728 Key Features","text":"<ul> <li>\ud83d\ude80 High-Performance Rendering - WebGL-based 3D rendering supporting millions of cells</li> <li>\ud83d\udcca Multi-Dimensional Data Display - Support for categorical annotations, continuous values, gene expression, and more</li> <li>\ud83c\udfa8 Interactive Controls - Real-time adjustment of colors, transparency, point size, and other parameters</li> <li>\ud83d\udd2c 2D/3D View Switching - Flexible switching between 3D point cloud and 2D slice views</li> <li>\ud83e\uddec Gene Expression Query - Quick visualization of spatial expression patterns for any gene</li> <li>\ud83d\udcd0 Multiple Layout Modes - Support for original coordinates, 2D Treemap, histogram, and more</li> <li>\ud83c\udfaf Precise Filtering - Filter data points by category, numerical range, and other conditions</li> <li>\ud83d\udcbe One-Click Screenshots - Easily save current views for publications and reports</li> </ul>"},{"location":"#use-cases","title":"\ud83c\udfaf Use Cases","text":"<p>SpatialVista is particularly suitable for:</p> <ul> <li>Spatial Transcriptomics Data Exploration - Visium, MERFISH, seqFISH, STARmap, and other technologies</li> <li>Single-Cell Spatial Data Analysis - Visualize spatial distribution of cell types</li> <li>Tissue Architecture Studies - Explore molecular features of tissue regions</li> <li>Gene Expression Pattern Analysis - View spatial expression of specific genes</li> <li>Data Quality Control - Quickly check data integrity and outliers</li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install spatialvista\n</code></pre>"},{"location":"#basic-usage","title":"Basic Usage","text":"<pre><code>import spatialvista as spv\nimport scanpy as sc\n\n# Load spatial transcriptomics data\nadata = sc.read_h5ad(\"spatial_data.h5ad\")\n\n# Create interactive visualization\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",  # obsm key containing spatial coordinates\n    color=\"celltype\",    # Default annotation for coloring\n    height=600               # Widget height in pixels\n)\n\n# Display widget\nwidget\n</code></pre> <p>That's it! \ud83c\udf89</p>"},{"location":"#core-features","title":"\ud83d\udcda Core Features","text":""},{"location":"#1-categorical-annotation-visualization","title":"1. Categorical Annotation Visualization","text":"<pre><code># Color by cell type\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    annotations=[\"leiden\", \"tissue_region\"]  # Additional annotations to load\n)\n</code></pre>"},{"location":"#2-continuous-value-visualization","title":"2. Continuous Value Visualization","text":"<pre><code># Visualize continuous values (e.g., QC metrics)\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    continuous=[\"total_counts\", \"n_genes\"]  # Continuous value fields\n)\n</code></pre>"},{"location":"#3-gene-expression-visualization","title":"3. Gene Expression Visualization","text":"<pre><code># View expression patterns of specific genes\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    genes=[\"Pecam1\", \"Cd3e\", \"Epcam\"],  # Gene list\n    layer=\"normalized\"  # Optional: use specific layer if available\n)\n</code></pre>"},{"location":"#4-2d3d-view-switching","title":"4. 2D/3D View Switching","text":"<pre><code># If data has section information, switch to 2D view in UI\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    section=\"slice_id\",  # Section identifier field for section browser\n)\n</code></pre>"},{"location":"#interactive-controls","title":"\ud83c\udfa8 Interactive Controls","text":"<p>Once displayed, the widget provides rich interactive controls for exploring your data:</p> <ul> <li>Navigate in 3D space (rotate, pan, zoom)</li> <li>Switch between annotations and customize colors</li> <li>Query continuous values and gene expression</li> <li>Filter by thresholds and hide specific categories</li> <li>Adjust visualization parameters (size, opacity, layout)</li> <li>Export screenshots</li> </ul> <p>\u2192 Learn more about interactive controls</p>"},{"location":"#learn-more","title":"\ud83d\udcd6 Learn More","text":"<ul> <li>Quick Start - Installation and minimal example</li> <li>Interactive Controls - Learn how to use the visualization</li> <li>API Reference - Complete function documentation</li> <li>FAQ - Troubleshooting and tips</li> </ul>"},{"location":"#contributing-support","title":"\ud83e\udd1d Contributing &amp; Support","text":"<p>Issues and Pull Requests are welcome!</p> <ul> <li>GitHub: https://github.com/yourusername/spatial-vista-py</li> <li>Documentation: https://spatial-vista-py.readthedocs.io</li> </ul>"},{"location":"#license","title":"\ud83d\udcc4 License","text":"<p>SpatialVista is open-sourced under the MIT License.</p> <p>Built with \u2764\ufe0f for spatial omics research by WenjieWei@YangLab</p>"},{"location":"controls/","title":"Interactive Controls","text":"<p>Learn how to interact with SpatialVista visualizations in Jupyter.</p>"},{"location":"controls/#navigation","title":"Navigation","text":""},{"location":"controls/#3d2d-view-controls","title":"3D/2D View Controls","text":"<ul> <li>Rotate: Drag or Shift + \u2191\u2193\u2190\u2192</li> <li>Pan: Shift + Drag or \u2191\u2193\u2190\u2192</li> <li>Zoom: Mouse wheel scroll</li> </ul>"},{"location":"controls/#annotation-panel","title":"Annotation Panel","text":"<p>The left sidebar allows you to switch between different categorical annotations.</p>"},{"location":"controls/#features","title":"Features","text":"<ul> <li>Switch Annotations: Click on different annotation types to change the coloring</li> <li>Hide/Show Categories: Click on category names in the legend to toggle visibility</li> <li>Custom Colors: Click on color swatches to open the color picker and change category colors</li> </ul>"},{"location":"controls/#control-panel","title":"Control Panel","text":"<p>The right panel provides controls for adjusting visualization parameters.</p> <p></p>"},{"location":"controls/#point-size","title":"Point Size","text":"<p>Adjust the size of individual points in the visualization.</p> <ul> <li>Use the slider to increase or decrease point size</li> <li>Useful for sparse or dense datasets</li> </ul>"},{"location":"controls/#point-opacity","title":"Point Opacity","text":"<p>Control the transparency of points.</p> <ul> <li>Lower values: More transparent (better for seeing overlapping structures)</li> <li>Higher values: More opaque (better for sparse data)</li> </ul>"},{"location":"controls/#layout-modes","title":"Layout Modes","text":"<p>Switch between different spatial arrangements:</p> <ul> <li>Original: Display points at their original coordinates</li> <li>2D Treemap: Arrange points in a space-filling treemap layout</li> <li>2D Histogram: Arrange points in histogram bins</li> </ul> <p></p>"},{"location":"controls/#continuous-values-gene-expression","title":"Continuous Values &amp; Gene Expression","text":""},{"location":"controls/#selecting-variables","title":"Selecting Variables","text":"<p>Use the dropdown menu to select continuous values or gene expression:</p> <ul> <li>Continuous observations: QC metrics, cell scores, etc.</li> <li>Gene expression: Any gene from your dataset </li> </ul>"},{"location":"controls/#threshold-slider","title":"Threshold Slider","text":"<p>When a continuous value or gene is selected, a slider appears at the bottom:</p> <ul> <li>Adjust threshold: Move the slider to filter points by value</li> <li>Color gradient: The background shows the value range</li> <li>Reset: Click the reset button to return to minimum value</li> </ul> <p></p>"},{"location":"controls/#view-switching","title":"View Switching","text":""},{"location":"controls/#2d3d-toggle","title":"2D/3D Toggle","text":"<p>If your data has section information, you can switch between views:</p> <ul> <li>3D View: Full 3D point cloud</li> <li>2D View: Section-by-section 2D slices</li> </ul>"},{"location":"controls/#section-carousel","title":"Section Carousel","text":"<p>In 2D mode, use the section carousel to browse different slices:</p> <ul> <li>Click thumbnails: Jump to a specific section</li> <li>Preview: Each thumbnail shows a preview of that section</li> </ul> <p></p>"},{"location":"controls/#screenshots","title":"Screenshots","text":""},{"location":"controls/#capture-current-view","title":"Capture Current View","text":"<p>Click the camera icon in the header to save the current visualization:</p> <ul> <li>Captures exactly what you see on screen</li> <li>Downloads as PNG image</li> <li>Includes current colors, filters, and layout</li> </ul> <p>Next: Check the API Reference for programmatic control options.</p>"},{"location":"faq/","title":"Frequently Asked Questions (FAQ)","text":""},{"location":"faq/#installation-environment","title":"Installation &amp; Environment","text":""},{"location":"faq/#cannot-import-spatialvista-in-jupyter","title":"Cannot import spatialvista in Jupyter?","text":"<p>This is usually a kernel environment issue. The package is installed in one Python environment, but Jupyter is using a different kernel.</p> <p>Solution:</p> <pre><code># Check which Python your kernel is using\nimport sys\nprint(sys.executable)\n\n# Check if spatialvista is installed in this environment\nimport subprocess\nsubprocess.run([sys.executable, \"-m\", \"pip\", \"list\"])\n</code></pre> <p>If spatialvista is not listed, install it in the correct environment:</p> <pre><code># Install in the same environment as your Jupyter kernel\npython -m pip install spatialvista\n\n# Or with uv\nuv pip install spatialvista\n</code></pre> <p>Alternative: Create a new kernel for your environment:</p> <pre><code># Activate your environment first, then:\npython -m ipykernel install --user --name=myenv --display-name=\"Python (myenv)\"\n</code></pre> <p>Then select this kernel in Jupyter.</p>"},{"location":"faq/#widget-not-displaying","title":"Widget not displaying?","text":"<p>Try in order:</p> <ol> <li>Restart Jupyter kernel (Kernel \u2192 Restart)</li> <li>Clear browser cache and refresh page</li> <li>Check browser console for errors (press F12)</li> <li>Try Chrome or Firefox (best compatibility)</li> <li>(JupyterLab only) Run <code>jupyter lab build</code> and restart</li> </ol>"},{"location":"faq/#data-coordinates","title":"Data &amp; Coordinates","text":""},{"location":"faq/#why-do-my-coordinates-look-different-in-the-visualization","title":"Why do my coordinates look different in the visualization?","text":"<p>SpatialVista uses LAZ format for efficient point cloud storage, which applies scale and offset transformations to compress coordinates into integers.</p> <p>What happens:</p> <ol> <li>Your original coordinates (e.g., <code>[1234.567, 890.123, 456.789]</code>)</li> <li>Are transformed: <code>int((coord - offset) / scale)</code></li> <li>Stored as integers for compression</li> <li>Reconstructed on display: <code>coord_display = int_value * scale + offset</code></li> </ol> <p>This means:</p> <ul> <li>Coordinates are slightly quantized (small precision loss)</li> <li>Visual positions are functionally identical to originals</li> <li>The transformation is automatic and reversible</li> </ul> <p>Check the transformation:</p> <pre><code># Your original coordinates\nprint(adata.obsm[\"spatial\"].min(axis=0))  # [min_x, min_y, min_z]\nprint(adata.obsm[\"spatial\"].max(axis=0))  # [max_x, max_y, max_z]\n\n# These become the offset and are used to calculate scale\n</code></pre> <p>Why does this matter?</p> <ul> <li>Very large coordinate values (&gt;10^6) work fine</li> <li>Very small scales (&lt;10^-6) may lose precision</li> <li>For 99% of spatial data, this is transparent</li> </ul>"},{"location":"faq/#keyerror-for-position-or-annotation-keys","title":"<code>KeyError</code> for position or annotation keys?","text":"<p>The specified key doesn't exist in your data.</p> <p>Solution:</p> <pre><code># Check available keys\nprint(\"Position keys:\", adata.obsm.keys())\nprint(\"Annotation keys:\", adata.obs.columns.tolist())\n\n# Use correct keys\nwidget = spv.vis(adata, position=\"your_actual_key\", color=\"your_annotation\")\n</code></pre>"},{"location":"faq/#performance-best-practices","title":"Performance &amp; Best Practices","text":""},{"location":"faq/#widget-loading-is-slow-or-browser-freezes","title":"Widget loading is slow or browser freezes?","text":"<p>Don't load everything at once! Load only what you need initially, then reload with different parameters.</p> <p>Bad practice (loads too much):</p> <pre><code># This loads 50+ annotations + 100 genes = very slow!\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    annotations=list(adata.obs.columns),  # \u274c All annotations\n    genes=list(adata.var_names[:100])     # \u274c 100 genes\n)\n</code></pre> <p>Good practice (load incrementally):</p> <pre><code># Step 1: Start with basics\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    annotations=[\"leiden\"]  # Just 1-2 extra annotations\n)\n\n# Step 2: Later, reload with genes\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    genes=[\"Gene1\", \"Gene2\", \"Gene3\"]  # Just a few genes\n)\n\n# Step 3: Or reload with continuous values\nwidget = spv.vis(\n    adata,\n    position=\"spatial\",\n    color=\"celltype\",\n    continuous=[\"total_counts\", \"n_genes\"]  # Just key QC metrics\n)\n</code></pre> <p>Why?</p> <ul> <li>Each annotation/gene/continuous value is transferred to the browser</li> <li>Too much data = slow transfer + high memory usage</li> <li>Reloading with new parameters is fast - just create a new widget</li> </ul> <p>Recommended limits:</p> <ul> <li>Annotations: 3-5 max per widget</li> <li>Genes: 5-10 max per widget</li> <li>Continuous values: 3-5 max per widget</li> </ul>"},{"location":"faq/#large-dataset-causing-memory-errors","title":"Large dataset causing memory errors?","text":"<p>Downsample before visualization:</p> <pre><code>import scanpy as sc\n\n# Option 1: Keep a fraction\nsc.pp.subsample(adata, fraction=0.5)  # 50% of cells\n\n# Option 2: Keep exact number\nsc.pp.subsample(adata, n_obs=100000)  # 100k cells\n\n# Then visualize\nwidget = spv.vis(adata, position=\"spatial\", color=\"celltype\")\n</code></pre>"},{"location":"faq/#logging-debugging","title":"Logging &amp; Debugging","text":""},{"location":"faq/#enable-detailed-logging","title":"Enable detailed logging?","text":"<p>Useful for debugging data loading issues:</p> <pre><code>import spatialvista as spv\n\nspv.set_log_level(\"INFO\")  # See data transfer progress\n# or\nspv.set_log_level(\"DEBUG\")  # See everything\n\nwidget = spv.vis(adata, position=\"spatial\", color=\"celltype\")\n</code></pre>"},{"location":"faq/#disable-logging","title":"Disable logging?","text":"<pre><code>spv.disable_logging()\n# or\nspv.set_log_level(\"ERROR\")  # Only show errors\n</code></pre>"},{"location":"faq/#support","title":"Support","text":""},{"location":"faq/#need-help","title":"Need help?","text":"<ol> <li>Check the docs: API Reference | Controls Guide</li> <li>Report bugs: GitHub Issues</li> <li>Include: Error message, minimal example, Python/OS/browser info, DEBUG log</li> </ol>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#installation","title":"Installation","text":""},{"location":"quickstart/#requirements","title":"Requirements","text":"<ul> <li>Python: 3.10 or higher</li> <li>Jupyter: Notebook or Lab</li> </ul>"},{"location":"quickstart/#install-with-uv-recommended","title":"Install with uv (Recommended)","text":"<pre><code>uv pip install spatialvista\n</code></pre>"},{"location":"quickstart/#install-with-pip","title":"Install with pip","text":"<pre><code>pip install spatialvista\n</code></pre>"},{"location":"quickstart/#install-from-source","title":"Install from Source","text":"<pre><code>git clone https://github.com/yourusername/spatial-vista-py.git\ncd spatial-vista-py\nuv pip install -e .\n</code></pre>"},{"location":"quickstart/#minimal-example","title":"Minimal Example","text":"<p>Verify your installation with this minimal example:</p> <pre><code>import numpy as np\nimport spatialvista as spv\n\n# Create minimal test data\nclass FakeAnnData:\n    def __init__(self, n: int):\n        self.obsm = {\"spatial\": np.random.rand(n, 3)}\n        self.obs = {\"celltype\": np.random.choice([\"A\", \"B\", \"C\"], n)}\n        self.var_names = []\n        self.X = None\n        self.n_obs = n\n\nadata = FakeAnnData(n=10_000)\n\n# Create visualization\nspv.vis(adata, position=\"spatial\", color=\"celltype\")\n</code></pre> <p>If you see an interactive 3D visualization, you're all set! \ud83c\udf89</p>"},{"location":"quickstart/#update","title":"Update","text":"<pre><code>uv pip install --upgrade spatialvista\n# or\npip install --upgrade spatialvista\n</code></pre>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Controls - Learn how to interact with the visualization</li> <li>API Reference - Complete function documentation</li> <li>FAQ - Common questions and troubleshooting</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>Complete API documentation auto-generated from code docstrings.</p>"},{"location":"api/#main-visualization-function","title":"Main Visualization Function","text":""},{"location":"api/#spatialvista.vis","title":"<code>vis(adata, position, color, section=None, annotations=None, continuous=None, genes=None, layer=None, height=600, mode='3D', _async_workers=2, _wait_for_all_sends=False)</code>","text":"<p>Create and return a SpatialVista visualization widget.</p> <p>If _wait_for_all_sends is True, the function will block until all background sends finish. Otherwise it will return the widget immediately while sends may continue in background.</p> <p>Parameters:</p> Name Type Description Default <code>adata</code> <code>AnnData</code> <p>Annotated data object containing spatial information.</p> required <code>position</code> <code>str</code> <p>Key in adata.obsm containing spatial coordinates.</p> required <code>color</code> <code>str</code> <p>Key in adata.obs for default categorical coloring.</p> required <code>section</code> <code>str</code> <p>Annotation key for section slicing (only relevant when mode=\"3D\" and switching to 2D slice view in UI). Ignored when mode=\"2D\".</p> <code>None</code> <code>annotations</code> <code>list[str]</code> <p>List of additional categorical annotation keys to export.</p> <code>None</code> <code>continuous</code> <code>list[str]</code> <p>List of continuous observation keys to export.</p> <code>None</code> <code>genes</code> <code>list[str]</code> <p>List of gene names to export.</p> <code>None</code> <code>layer</code> <code>str</code> <p>Layer to use for gene expression values. If None, uses adata.X.</p> <code>None</code> <code>height</code> <code>int</code> <p>Height of the widget in pixels.</p> <code>600</code> <code>mode</code> <code>str</code> <p>Visualization mode. \"3D\" for 3D point cloud, \"2D\" for 2D projection (z=0).</p> <code>\"3D\"</code> <code>_async_workers</code> <code>int</code> <p>Number of background workers for async trait sends.</p> <code>2</code> <code>_wait_for_all_sends</code> <code>bool</code> <p>Whether to wait for all background sends to complete before returning.</p> <code>False</code> <p>Returns:</p> Type Description <code>SpatialVistaWidget</code> <p>The configured widget ready for display.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; import spatialvista as spv\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Basic usage\n&gt;&gt;&gt; widget = spv.vis(adata, position=\"spatial\", color=\"region\")\n&gt;&gt;&gt;\n&gt;&gt;&gt; # With logging enabled\n&gt;&gt;&gt; spv.set_log_level(\"INFO\")\n&gt;&gt;&gt; widget = spv.vis(adata, position=\"spatial\", color=\"region\")\n</code></pre>"},{"location":"api/#logging-functions","title":"Logging Functions","text":""},{"location":"api/#spatialvista.set_log_level","title":"<code>set_log_level(level='WARNING')</code>","text":"<p>Set the logging level for the spatialvista package.</p> <p>Parameters:</p> Name Type Description Default <code>level</code> <code>str</code> <p>The logging level. Valid values are: - \"TRACE\": Most verbose, shows all messages - \"DEBUG\": Debug information - \"INFO\": General information - \"SUCCESS\": Success messages - \"WARNING\": Warning messages (default) - \"ERROR\": Error messages only - \"CRITICAL\": Critical errors only</p> <code>\"WARNING\"</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If an invalid log level is provided.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; import spatialvista as spv\n&gt;&gt;&gt; spv.set_log_level(\"INFO\")  # Show info and above\n&gt;&gt;&gt; spv.set_log_level(\"DEBUG\")  # Show debug and above\n&gt;&gt;&gt; spv.set_log_level(\"ERROR\")  # Only show errors\n</code></pre>"},{"location":"api/#spatialvista.get_log_level","title":"<code>get_log_level()</code>","text":"<p>Get the current logging level.</p> <p>Returns:</p> Type Description <code>str</code> <p>The current log level (e.g., \"WARNING\", \"INFO\").</p>"},{"location":"api/#spatialvista.get_logger","title":"<code>get_logger()</code>","text":"<p>Get the configured logger instance.</p> <p>Returns:</p> Type Description <code>logger</code> <p>The configured loguru logger instance.</p>"}]}